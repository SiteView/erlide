var contextPath = '';var origHtml=new Object();var origText=new Object();var origPreviewLink=new Object();function toggleRenderPreview(I,L,K,C){var F=document.getElementById("pid");var G=(F==null)?null:F.value;var H=document.getElementById("issuetype");var E=(H==null)?null:H.value;if(origHtml[I]==null){if(encodeURI(document.getElementById(I).value).length>2500&&navigator.userAgent.indexOf("Safari")>=0){window.open("","wiki_renderer_preview","width=780, height=575, resizable, scrollbars=yes");var A=document.createElement("form");A.action="/secure/WikiRendererPreviewAction.jspa?rendererType="+K+"&issueKey="+C+"&fieldName="+encodeURI(L)+"&pid="+encodeURI(G)+"&issueType="+encodeURI(E);A.method="POST";A.target="wiki_renderer_preview";var D=document.createElement("input");D.name="unrenderedMarkup";D.type="hidden";D.value=document.getElementById(I).value;A.appendChild(D);var B=document.getElementsByTagName("BODY");B[0].appendChild(A);A.submit()}else{showWaitImage(true,I);RendererPreviewAjaxUtil.getPreviewHtml(K,document.getElementById(I).value,C,G,E,renderPreviewCallback(I))}}else{var J=document.createElement("div");J.innerHTML="&nbsp;";J.setAttribute("style","height: 300px");document.getElementById(I+"-edit").parentNode.insertBefore(J,document.getElementById(I+"-edit"));document.getElementById(I+"-temp").name=I+"-temp";xHeight(I+"-edit",null);document.getElementById(I+"-edit").innerHTML=origHtml[I];document.getElementById(I).value=origText[I];origHtml[I]=null;document.getElementById(I+"-edit").className="";document.getElementById(I+"-preview_link").innerHTML="<img alt='预览' title='预览' class='unselectedPreview' border='0' width='18' height='18' src='/images/icons/fullscreen.gif'>";J.parentNode.removeChild(J)}return false}var renderPreviewCallback=function(A){return function(D){var C=document.createElement("div");C.innerHTML="&nbsp;";C.setAttribute("style","height: 300px");document.getElementById(A+"-edit").parentNode.insertBefore(C,document.getElementById(A+"-edit"));var E=xHeight(A+"-edit",null);origHtml[A]=document.getElementById(A+"-edit").innerHTML;origText[A]=document.getElementById(A).value;document.getElementById(A+"-temp").value=origText[A];document.getElementById(A+"-temp").name=A;showWaitImage(false,A);document.getElementById(A+"-preview_link").innerHTML="<img alt='编辑' title='编辑' class='selectedPreview' width='18' height='18' src='/images/icons/fullscreen.gif'>";document.getElementById(A+"-edit").className="previewClass";document.getElementById(A+"-edit").innerHTML=D;var B=xHeight(A+"-edit",null);if(B<E){xHeight(A+"-edit",E)}C.parentNode.removeChild(C)}};function showWaitImage(B,C){var A="<img id='"+C+"-wait_image' alt='Wait Image' border='0' src='/images/icons/wait.gif'>";if(B){origPreviewLink[C]=document.getElementById(C+"-preview_link_div").innerHTML;document.getElementById(C+"-preview_link_div").innerHTML=A}else{document.getElementById(C+"-preview_link_div").innerHTML=origPreviewLink[C];origPreviewLink[C]=null}}function xHeight(G,E){if(!(G=xGetElementById(G))){return 0}if(xNum(E)){if(E<0){E=0}else{E=Math.round(E)}}else{E=-1}var D=xDef(G.style);if(G==document||G.tagName.toLowerCase()=="html"||G.tagName.toLowerCase()=="body"){E=xClientHeight()}else{if(D&&xDef(G.offsetHeight)&&xStr(G.style.height)){if(E>=0){var F=0,C=0,B=0,H=0;if(document.compatMode=="CSS1Compat"){var A=xGetComputedStyle;F=A(G,"padding-top",1);if(F!==null){C=A(G,"padding-bottom",1);B=A(G,"border-top-width",1);H=A(G,"border-bottom-width",1)}else{if(xDef(G.offsetHeight,G.style.height)){G.style.height=E+"px";F=G.offsetHeight-E}}}E-=(F+C+B+H);if(isNaN(E)||E<0){return }else{G.style.height=E+"px"}}else{G.style.height=""}E=G.offsetHeight}else{if(D&&xDef(G.style.pixelHeight)){if(E>=0){G.style.pixelHeight=E}if(E==-1){G.style.pixelHeight=""}E=G.style.pixelHeight}}}return E};var xOp7Up,xOp6Dn,xIE4Up,xIE4,xIE5,xNN4,xUA=navigator.userAgent.toLowerCase();if(window.opera){var i=xUA.indexOf("opera");if(i!=-1){var v=parseInt(xUA.charAt(i+6));xOp7Up=v>=7;xOp6Dn=v<7}}else{if(navigator.vendor!="KDE"&&document.all&&xUA.indexOf("msie")!=-1){xIE4Up=parseFloat(navigator.appVersion)>=4;xIE4=xUA.indexOf("msie 4")!=-1;xIE5=xUA.indexOf("msie 5")!=-1}else{if(document.layers){xNN4=true}}}xMac=xUA.indexOf("mac")!=-1;function xAddEventListener(e,eT,eL,cap){if(!(e=xGetElementById(e))){return }eT=eT.toLowerCase();if((!xIE4Up&&!xOp7Up)&&e==window){if(eT=="resize"){window.xPCW=xClientWidth();window.xPCH=xClientHeight();window.xREL=eL;xResizeEvent();return }if(eT=="scroll"){window.xPSL=xScrollLeft();window.xPST=xScrollTop();window.xSEL=eL;xScrollEvent();return }}var eh="e.on"+eT+"=eL";if(e.addEventListener){e.addEventListener(eT,eL,cap)}else{if(e.attachEvent){e.attachEvent("on"+eT,eL)}else{eval(eh)}}}function xResizeEvent(){if(window.xREL){setTimeout("xResizeEvent()",250)}var A=xClientWidth(),B=xClientHeight();if(window.xPCW!=A||window.xPCH!=B){window.xPCW=A;window.xPCH=B;if(window.xREL){window.xREL()}}}function xScrollEvent(){if(window.xSEL){setTimeout("xScrollEvent()",250)}var A=xScrollLeft(),B=xScrollTop();if(window.xPSL!=A||window.xPST!=B){window.xPSL=A;window.xPST=B;if(window.xSEL){window.xSEL()}}}function xClientHeight(){var A=0;if(xOp6Dn){A=window.innerHeight}else{if(document.compatMode=="CSS1Compat"&&!window.opera&&document.documentElement&&document.documentElement.clientHeight){A=document.documentElement.clientHeight}else{if(document.body&&document.body.clientHeight){A=document.body.clientHeight}else{if(xDef(window.innerWidth,window.innerHeight,document.width)){A=window.innerHeight;if(document.width>window.innerWidth){A-=16}}}}}return A}function xClientWidth(){var A=0;if(xOp6Dn){A=window.innerWidth}else{if(document.compatMode=="CSS1Compat"&&!window.opera&&document.documentElement&&document.documentElement.clientWidth){A=document.documentElement.clientWidth}else{if(document.body&&document.body.clientWidth){A=document.body.clientWidth}else{if(xDef(window.innerWidth,window.innerHeight,document.height)){A=window.innerWidth;if(document.height>window.innerHeight){A-=16}}}}}return A}function xDef(){for(var A=0;A<arguments.length;++A){if(typeof (arguments[A])=="undefined"){return false}}return true}function xEvent(A){var B=A||window.event;if(!B){return }if(B.type){this.type=B.type}if(B.target){this.target=B.target}else{if(B.srcElement){this.target=B.srcElement}}if(B.relatedTarget){this.relatedTarget=B.relatedTarget}else{if(B.type=="mouseover"&&B.fromElement){this.relatedTarget=B.fromElement}else{if(B.type=="mouseout"){this.relatedTarget=B.toElement}}}if(xOp6Dn){this.pageX=B.clientX;this.pageY=B.clientY}else{if(xDef(B.pageX,B.pageY)){this.pageX=B.pageX;this.pageY=B.pageY}else{if(xDef(B.clientX,B.clientY)){this.pageX=B.clientX+xScrollLeft();this.pageY=B.clientY+xScrollTop()}}}if(xDef(B.offsetX,B.offsetY)){this.offsetX=B.offsetX;this.offsetY=B.offsetY}else{if(xDef(B.layerX,B.layerY)){this.offsetX=B.layerX;this.offsetY=B.layerY}else{this.offsetX=this.pageX-xPageX(this.target);this.offsetY=this.pageY-xPageY(this.target)}}if(B.keyCode){this.keyCode=B.keyCode}else{if(xDef(B.which)&&B.type.indexOf("key")!=-1){this.keyCode=B.which}}this.shiftKey=B.shiftKey;this.ctrlKey=B.ctrlKey;this.altKey=B.altKey}function xGetComputedStyle(A,F,C){var G,H="undefined";var E=document.defaultView;if(E&&E.getComputedStyle){G=E.getComputedStyle(A,"");if(G){H=G.getPropertyValue(F)}}else{if(A.currentStyle){var B=F.split("-");F=B[0];for(var D=1;D<B.length;++D){c=B[D].charAt(0);F+=B[D].replace(c,c.toUpperCase())}H=A.currentStyle[F]}else{return null}}return C?(parseInt(H)||0):H}function xGetElementById(A){if(typeof (A)!="string"){return A}if(document.getElementById){A=document.getElementById(A)}else{if(document.all){A=document.all[A]}else{A=null}}return A}function xGetElementsByTagName(A,C){var B=null;A=A||"*";C=C||document;if(xIE4||xIE5){if(A=="*"){B=C.all}else{B=C.all.tags(A)}}else{if(C.getElementsByTagName){B=C.getElementsByTagName(A)}}return B||new Array()}function xNum(){for(var A=0;A<arguments.length;++A){if(isNaN(arguments[A])||typeof (arguments[A])!="number"){return false}}return true}function xPageX(B){if(!(B=xGetElementById(B))){return 0}var A=0;while(B){if(xDef(B.offsetLeft)){A+=B.offsetLeft}B=xDef(B.offsetParent)?B.offsetParent:null}return A}function xPageY(A){if(!(A=xGetElementById(A))){return 0}var B=0;while(A){if(xDef(A.offsetTop)){B+=A.offsetTop}A=xDef(A.offsetParent)?A.offsetParent:null}return B}function xScrollLeft(C,B){var D=0;if(!xDef(C)||B||C==document||C.tagName.toLowerCase()=="html"||C.tagName.toLowerCase()=="body"){var A=window;if(B&&C){A=C}if(A.document.documentElement&&A.document.documentElement.scrollLeft){D=A.document.documentElement.scrollLeft}else{if(A.document.body&&xDef(A.document.body.scrollLeft)){D=A.document.body.scrollLeft}}}else{C=xGetElementById(C);if(C&&xNum(C.scrollLeft)){D=C.scrollLeft}}return D}function xScrollTop(C,B){var D=0;if(!xDef(C)||B||C==document||C.tagName.toLowerCase()=="html"||C.tagName.toLowerCase()=="body"){var A=window;if(B&&C){A=C}if(A.document.documentElement&&A.document.documentElement.scrollTop){D=A.document.documentElement.scrollTop}else{if(A.document.body&&xDef(A.document.body.scrollTop)){D=A.document.body.scrollTop}}}else{C=xGetElementById(C);if(C&&xNum(C.scrollTop)){D=C.scrollTop}}return D}function xStr(B){for(var A=0;A<arguments.length;++A){if(typeof (arguments[A])!="string"){return false}}return true}function xWidth(F,B){if(!(F=xGetElementById(F))){return 0}if(xNum(B)){if(B<0){B=0}else{B=Math.round(B)}}else{B=-1}var D=xDef(F.style);if(F==document||F.tagName.toLowerCase()=="html"||F.tagName.toLowerCase()=="body"){B=xClientWidth()}else{if(D&&xDef(F.offsetWidth)&&xStr(F.style.width)){if(B>=0){var E=0,H=0,G=0,C=0;if(document.compatMode=="CSS1Compat"){var A=xGetComputedStyle;E=A(F,"padding-left",1);if(E!==null){H=A(F,"padding-right",1);G=A(F,"border-left-width",1);C=A(F,"border-right-width",1)}else{if(xDef(F.offsetWidth,F.style.width)){F.style.width=B+"px";E=F.offsetWidth-B}}}B-=(E+H+G+C);if(isNaN(B)||B<0){return }else{F.style.width=B+"px"}}B=F.offsetWidth}else{if(D&&xDef(F.style.pixelWidth)){if(B>=0){F.style.pixelWidth=B}B=F.style.pixelWidth}}}return B}
window.onload=function(){var B=xGetElementsByTagName("textarea");for(var A=0;A<B.length;A++){xAddEventListener(B[A],"keypress",submitOnCtrlEnter)}};function submitOnEnter(C){var B=new xEvent(C);var A=B.target;if(B.keyCode==13&&A.form){A.form.submit()}}function submitOnCtrlEnter(C){var B=new xEvent(C);var A=B.target;if(B.ctrlKey&&(B.keyCode==13||B.keyCode==10)&&A.form){A.form.submit();return false}return true}function getMultiSelectValues(C){var A="";for(var B=0;B<C.length;B++){if(C.options[B].selected){if(C.options[B].value&&C.options[B].value.length>0){A=A+" "+C.options[B].value}}}return A}function getMultiSelectValuesAsArray(C){var A=new Array();for(var B=0;B<C.length;B++){if(C.options[B].selected){if(C.options[B].value&&C.options[B].value.length>0){A[A.length]=C.options[B].value}}}return A}function arrayContains(C,B){for(var A=0;A<C.length;A++){if(C[A]==B){return true}}return false}function addClassName(B,A){var C=document.getElementById(B);if(C){C.className=C.className+" "+A}}function removeClassName(A,B){var C=document.getElementById(A);if(C){C.className=(" "+C.className+" ").replace(" "+B+" "," ")}}function getEscapedFieldValue(B){var A=document.getElementById(B);if(A.value){return B+"="+encodeURIComponent(A.value)}else{return""}}function getEscapedFieldValues(B){var A="";for(i=0;i<B.length;i++){A=A+"&"+getEscapedFieldValue(B[i])}return A}var GuiPrefs={toggleVisibility:function(A){var B=document.getElementById(A);if(B){if(readFromConglomerateCookie("jira.conglomerate.cookie",A,"1")=="1"){B.style.display="none";removeClassName(A+"header","headerOpened");addClassName(A+"header","headerClosed");saveToConglomerateCookie("jira.conglomerate.cookie",A,"0")}else{B.style.display="";removeClassName(A+"header","headerClosed");addClassName(A+"header","headerOpened");eraseFromConglomerateCookie("jira.conglomerate.cookie",A)}}}};function toggle(A){GuiPrefs.toggleVisibility(A)}function toggleDivsWithCookie(B,C){var D=document.getElementById(B);var A=document.getElementById(C);if(D.style.display=="none"){A.style.display="none";D.style.display="block";saveToConglomerateCookie("jira.viewissue.cong.cookie",B,"1");saveToConglomerateCookie("jira.viewissue.cong.cookie",C,"0")}else{D.style.display="none";A.style.display="block";saveToConglomerateCookie("jira.viewissue.cong.cookie",C,"1");saveToConglomerateCookie("jira.viewissue.cong.cookie",B,"0")}}function restoreDivFromCookie(B,D,A){if(A==null){A="1"}var C=document.getElementById(B);if(C){if(readFromConglomerateCookie(D,B,A)!="1"){C.style.display="none";removeClassName(B+"header","headerOpened");addClassName(B+"header","headerClosed")}else{C.style.display="";removeClassName(B+"header","headerClosed");addClassName(B+"header","headerOpened")}}}function restore(A){restoreDivFromCookie(A,"jira.conglomerate.cookie","1")}var PopupPrefs={getInnerSize:function(){var A,B;if(window.innerHeight){A=window.innerWidth;B=window.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){A=document.documentElement.clientWidth;B=document.documentElement.clientHeight}else{if(document.body){A=document.body.clientWidth;B=document.body.clientHeight}}}return[A,B]},getPosition:function(){var A,B;A=window.screenLeft||window.screenX;B=window.screenTop||window.screenY;return[A,B]},saveSize:function(B){var A=PopupPrefs.getInnerSize();saveToConglomerateCookie("jira.conglomerate.cookie",B+"w",A[0]);saveToConglomerateCookie("jira.conglomerate.cookie",B+"h",A[1]);PopupPrefs.savePosition(B)},savePosition:function(B){var A=PopupPrefs.getPosition();saveToConglomerateCookie("jira.conglomerate.cookie",B+"x",A[0]);saveToConglomerateCookie("jira.conglomerate.cookie",B+"y",A[1])},resizeAndReposition:function(E){var D=PopupPrefs.getInnerSize();var B=PopupPrefs.getPosition();var C=parseInt(readFromConglomerateCookie("jira.conglomerate.cookie",E+"w",D[0]));var F=parseInt(readFromConglomerateCookie("jira.conglomerate.cookie",E+"h",D[1]));var A=parseInt(readFromConglomerateCookie("jira.conglomerate.cookie",E+"x",B[0]));var G=parseInt(readFromConglomerateCookie("jira.conglomerate.cookie",E+"y",B[1]));PopupPrefs.resizeToInnerAndPosition(C,F,A,G)},resizeToInnerAndPosition:function(C,F,A,G){var E,B;if(window.innerHeight){E=window.outerWidth-window.innerWidth;B=window.outerHeight-window.innerHeight}else{window.moveTo(0,0);window.resizeTo(screen.availWidth,screen.availHeight);var D=PopupPrefs.getInnerSize();E=screen.availWidth-D[0];B=screen.availHeight-D[1]}window.resizeTo(C+E,F+B);if(!window.opera){window.moveTo(A,G)}}};function saveToConglomerateCookie(D,A,B){var C=getCookieValue(D);C=addOrAppendToValue(A,B,C);saveCookie(D,C,365)}function readFromConglomerateCookie(E,B,A){var D=getCookieValue(E);var C=getValueFromCongolmerate(B,D);if(C!=null){return C}return A}function eraseFromConglomerateCookie(B,A){saveToConglomerateCookie(B,A,"")}function getValueFromCongolmerate(B,F){var E=null;if(F==null){F=""}var A=B+"=";var G=F.split("|");for(var C=0;C<G.length;C++){var D=G[C];while(D.charAt(0)==" "){D=D.substring(1,D.length)}if(D.indexOf(B)==0){return D.substring(A.length,D.length)}}return null}function addOrAppendToValue(A,C,G){var E="";if(G==null){G=""}var H=G.split("|");for(var B=0;B<H.length;B++){var D=H[B];if(D!=""){while(D.charAt(0)==" "){D=D.substring(1,D.length)}if(D.indexOf(A)!=0){E+=D+"|"}}}if(C!=null&&C!=""){var F=A+"="+C;if((E.length+F.length)<4020){E+=F}}return E}function getCookieValue(C){var A=C+"=";var B=document.cookie.split(";");for(var D=0;D<B.length;D++){var E=B[D];while(E.charAt(0)==" "){E=E.substring(1,E.length)}if(E.indexOf(A)==0){return E.substring(A.length,E.length)}}return null}function saveCookie(A,C,E){var B;if(E){var D=new Date();D.setTime(D.getTime()+(E*24*60*60*1000));B="; expires="+D.toGMTString()}else{B=""}document.cookie=A+"="+C+B+((contextPath)?";path="+contextPath:";path=/")}function readCookie(C,A){var B=getCookieValue(C);if(B!=null){return B}if(A){saveCookie(C,A,365);return A}else{return null}}function eraseCookie(A){saveCookie(A,"",-1)}function recolourSimpleTableRows(A){recolourTableRows(A,"rowNormal","rowAlternate",A+"_empty")}function recolourTableRows(C,I,A,D){var H=document.getElementById(C);var F=document.getElementById(D);var B=false;var K=0;var M=H.rows;var E=null;var J=null;for(var G=1;G<M.length;G++){var L=M[G];if(L.style.display!="none"){if(!B){L.className=I}else{L.className=A}K++;B=!B}if(L.style.display!="none"){if(E==null){E=L}J=L}}if(E!=null){E.className=E.className+" first-row"}if(J!=null){J.className=J.className+" last-row"}if(F){if(K==0){H.style.display="none";F.style.display=""}else{H.style.display="";F.style.display="none"}}}function htmlEscape(B){var A=document.createElement("div");A.appendChild(document.createTextNode(B));return A.innerHTML};var calledReallyShow=false;var calledReallyHide=false;var mouseOnText=false;var mouseInTip=false;function showToolTip(){mouseOnText=true;mouseInTip=false;if(!calledReallyShow){calledReallyShow=true;self.setTimeout("reallyShowTip()",800)}}function recordInTip(){mouseInTip=true;mouseOnText=false}function recordOutTip(){mouseInTip=false;fireReallyHide()}function reallyShowTip(){calledReallyShow=false;if(mouseOnText){document.getElementById("quicksearchhelp").style.display="";document.getElementById("quicksearchhelp").style.top=findPosY(document.getElementById("quickSearchInput"))+25}}function hideToolTip(){mouseOnText=false;fireReallyHide()}function fireReallyHide(){if(!calledReallyHide){calledReallyHide=true;self.setTimeout("reallyHideTip()",800)}}function reallyHideTip(){calledReallyHide=false;if(!mouseInTip){document.getElementById("quicksearchhelp").style.display="none"}}function findPosY(B){var A=0;if(B.offsetParent){while(B.offsetParent){A+=B.offsetTop;B=B.offsetParent}}else{if(B.y){A+=B.y}}return A}function quickSearchTextBoxSetFocus(){var A=document.getElementById("quickSearchInput");if(A){A.focus()}};